!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("assert"),require("saga-slice"),require("axios"),require("redux-saga")):"function"==typeof define&&define.amd?define(["exports","assert","saga-slice","axios","redux-saga"],t):t((e=e||self).SagaSliceTool={},e.assert,e.sagaSlice,e.axios,e.reduxSaga)}(this,(function(e,t,n,r,a){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;arguments.length>t;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t=t&&t.hasOwnProperty("default")?t.default:t;var i=function(e){return"@@redux-saga/"+e},s=i("CANCEL_PROMISE"),d=i("IO"),f=i("MULTICAST"),l=i("SELF_CANCELLATION"),p=i("TASK"),g=function(e){return null==e},v=function(e){return null!=e},h=function(e){return"function"==typeof e},m=function(e){return"string"==typeof e},y=Array.isArray,b=function(e){return e&&e[p]},S=function e(t){return t&&(m(t)||A(t)||h(t)||y(t)&&t.every(e))},x=function(e){return e&&h(e.take)&&h(e.close)},k=function(e){return h(e)&&e.hasOwnProperty("toString")},A=function(e){return!!e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},O=function(e){return x(e)&&e[f]};function w(e,t){var n;void 0===t&&(t=!0);var r=new Promise((function(r){n=setTimeout(r,e,t)}));return r[s]=function(){clearTimeout(n)},r}var q=function(e){return e};function j(e,t,n){if(!t(e))throw Error(n)}var R=function(e){throw e},L=function(e){return{value:e,done:!0}};var C="TAKE",F="PUT",E="RACE",T="CALL",D="FORK",P="CANCEL",U="SELECT",I="\n(HINT: if you are getting this errors in tests, consider using createMockTask from @redux-saga/testing-utils)",N=function(e,t){var n;return(n={})[d]=!0,n.combinator=!1,n.type=e,n.payload=t,n};function M(e,t){if(void 0===e&&(e="*"),arguments.length&&j(arguments[0],v,"take(patternOrChannel): patternOrChannel is undefined"),S(e))return N(C,{pattern:e});if(O(e)&&v(t)&&S(t))return N(C,{channel:e,pattern:t});if(x(e))return N(C,{channel:e});throw Error("take(patternOrChannel): argument "+e+" is not valid channel or a valid pattern")}function z(e,t){return arguments.length>1?(j(e,v,"put(channel, action): argument channel is undefined"),j(e,x,"put(channel, action): argument "+e+" is not a valid channel"),j(t,v,"put(channel, action): argument action is undefined")):j(e,v,"put(action): argument action is undefined"),g(t)&&(t=e,e=void 0),N(F,{channel:e,action:t})}var _=function(e,t){if(j(t,v,e+": argument fn is undefined or null"),!h(t)){var n,r,a=null;if(y(t))a=t[0],j(n=t[1],v,e+": argument of type [context, fn] has undefined or null `fn`");else{if(!(r=t)||y(r)||"object"!=typeof r)return void j(t,h,e+": argument fn is not function");a=t.context,j(n=t.fn,v,e+": argument of type {context, fn} has undefined or null `fn`")}a&&m(n)?j(a[n],h,e+': context arguments has no such method - "'+n+'"'):j(n,h,e+": unpacked fn argument (from [context, fn] or {context, fn}) is not a function")}};function H(e,t){var n,r=null;return h(e)?n=e:(y(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&m(n)&&h(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}var K=function(e){return e!==V};function B(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];var a="number"==typeof n[0]?n[0]:"ms";return j(e,K,"instead of writing `yield call(delay, "+a+")` where delay is an effect from `redux-saga/effects` you should write `yield delay("+a+")`"),_("call",e),N(T,H(e,n))}function G(e){_("fork",e);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return N(D,H(e,n))}function J(e){if(void 0===e&&(e=l),arguments.length>1)throw Error("cancel(...tasks) is not supported any more. Please use cancel([...tasks]) to cancel multiple tasks.");return y(e)?e.forEach((function(e){j(e,b,"cancel([...tasks]): argument "+e+" is not a valid Task object "+I)})):e!==l&&v(e)&&j(e,b,"cancel(task): argument "+e+" is not a valid Task object "+I),N(P,e)}function Q(e){void 0===e&&(e=q);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return arguments.length&&(j(arguments[0],v,"select(selector, [...]): argument selector is undefined"),j(e,h,"select(selector, [...]): argument "+e+" is not a function")),N(U,{selector:e,args:n})}var V=B.bind(null,w),W=function(e){return{done:!0,value:e}},X={};function Y(e){return x(e)?"channel":k(e)?e+"":h(e)?e.name:e+""}function Z(e,t,n){var r,a,o,c=t;function u(t,n){if(c===X)return W(t);if(n&&!a)throw c=X,n;r&&r(t);var u=n?e[a](n):e[c]();return o=u.effect,r=u.stateUpdater,a=u.errorState,(c=u.nextState)===X?W(t):o}return function(e,t,n){void 0===t&&(t=R),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:L,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}(u,(function(e){return u(null,e)}),n)}function $(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;n>a;a++)r[a-2]=arguments[a];var o,c,u={done:!1,value:M(e)},i=function(e){return{done:!1,value:G.apply(void 0,[t].concat(r,[e]))}},s=function(e){return{done:!1,value:J(e)}},d=function(e){return o=e},f=function(e){return c=e};return Z({q1:function(){return{nextState:"q2",effect:u,stateUpdater:f}},q2:function(){return o?{nextState:"q3",effect:s(o)}:{nextState:"q1",effect:i(c),stateUpdater:d}},q3:function(){return{nextState:"q1",effect:i(c),stateUpdater:d}}},"q1","takeLatest("+Y(e)+", "+t.name+")")}function ee(e,t,n){for(var r=arguments.length,a=Array(r>3?r-3:0),o=3;r>o;o++)a[o-3]=arguments[o];var c,u,i,s,d={done:!1,value:M(t)},f={done:!1,value:(i={action:M(t),debounce:V(e)},s=N(E,i),s.combinator=!0,s)},l=function(e){return c=e},p=function(e){return u=e};return Z({q1:function(){return{nextState:"q2",effect:d,stateUpdater:l}},q2:function(){return{nextState:"q3",effect:f,stateUpdater:p}},q3:function(){return u.debounce?{nextState:"q1",effect:(t=c,{done:!1,value:G.apply(void 0,[n].concat(a,[t]))})}:{nextState:"q2",effect:(e=u.action,{done:!1,value:e}),stateUpdater:l};var e,t}},"q1","debounce("+Y(t)+", "+n.name+")")}var te=function(e,t,n){j(t,v,e.name+" requires a pattern or channel"),j(n,v,e.name+" requires a saga parameter")};function ne(e,t){te(ne,e,t);for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;n>a;a++)r[a-2]=arguments[a];return G.apply(void 0,[$,e,t].concat(r))}function re(e,t,n){for(var r=arguments.length,a=Array(r>3?r-3:0),o=3;r>o;o++)a[o-3]=arguments[o];return G.apply(void 0,[ee,e,t,n].concat(a))}var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=e.name,a=e.sagaApi,c=e.takers,i=void 0===c?{}:c;return t(!!r&&r.constructor===String,"options.name: the resource's REST name is required"),t(!!a&&a.constructor===Object,"options.sagaApi: API object is required"),"takeLatest"===i&&(i=["readAll","readOne","create","update","patch","delete"].reduce((function(e,t){return u({},e,o({},t,ne))}),{})),function(e){var t;return u((o(t={},e.readAll,{saga:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.get("/".concat(r),e.readAllSuccess,e.readAllFail,e.readAllDone);case 2:case"end":return t.stop()}}),t)})),taker:i.readAll}),o(t,e.readOne,{saga:regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.payload,t.next=3,a.get("/".concat(r,"/").concat(o),e.readOneSuccess,e.readOneFail,e.readOneDone);case 3:case"end":return t.stop()}}),t)})),taker:i.readOne}),o(t,e.create,{saga:regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.payload,t.next=3,a.post("/".concat(r),o,e.createSuccess,e.createFail,e.createDone);case 3:case"end":return t.stop()}}),t)})),taker:i.create}),o(t,e.update,{saga:regeneratorRuntime.mark((function t(n){var o,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=(o=n.payload).id,u=o.changeset,t.next=4,a.put("/".concat(r,"/").concat(c),u,e.updateSuccess,e.updateFail,e.updateDone);case 4:case"end":return t.stop()}}),t)})),taker:i.update}),o(t,e.patch,{saga:regeneratorRuntime.mark((function t(n){var o,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=(o=n.payload).id,u=o.changeset,t.next=4,a.patch("/".concat(r,"/").concat(c),u,e.patchSuccess,e.patchFail,e.patchDone);case 4:case"end":return t.stop()}}),t)})),taker:i.patch}),o(t,e.delete,{saga:regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.payload,t.next=3,a.delete("/".concat(r,"/").concat(o),null,e.deleteSuccess,e.deleteFail,e.deleteDone);case 3:case"end":return t.stop()}}),t)})),taker:i.delete}),t),n?n(e):{})}},oe=function(e,t){e.isLoading=!1,e.data=Object.values(t||{}).reduce((function(e,t){return u({},e,o({},t.id,t))}),{})},ce=function(e,t){e.isLoading=!1,e.data[t.id]=u({},e.data[t.id]||{},{},t)},ue=function(e,t){e.isLoading=!1,e.data[t.id]=t},ie=function(e,t){e.isLoading=!1,e.data[t.id]=u({},e.data[t.id]||{},{},t)},se=function(e,t){e.isLoading=!1,delete e.data[t.id]},de=function(e,t){e.isLoading=!1,e.error=t},fe=function(e){e.isLoading=!0},le=function(e){e.isLoading=!1},pe=function(e,t){t.constructor===Object&&(e.current=t),t.constructor!==Number&&t.constructor!==String||(e.current=e.data[t])},ge=function(e){e.current=null},ve=function(){},he=function(e){return u({isLoading:!1,current:null,data:{},error:null},e||{})},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return u({readAllSuccess:oe,readOneSuccess:ce,createSuccess:ue,updateSuccess:ie,patchSuccess:ie,deleteSuccess:se,setCurrent:pe,resetCurrent:ge,readAll:fe,readOne:fe,create:fe,update:fe,patch:fe,delete:fe,readAllFail:de,readOneFail:de,createFail:de,updateFail:de,patchFail:de,deleteFail:de},t?{readAllDone:ve,readOneDone:ve,createDone:ve,updateDone:ve,patchDone:ve,deleteDone:ve}:{},{},e)},ye=function(e,t,n){for(var o=r.CancelToken.source(),c=[n],i=arguments.length,s=Array(i>3?i-3:0),d=3;i>d;d++)s[d-3]=arguments[d];"get"!==t&&c.push(s.shift());var f=s.shift()||{};c.push(u({},f,{cancelToken:o.token}));var l=e[t].apply(e,c);return l.cancel=function(){return o.cancel("request was cancelled by user")},l[a.CANCEL]=function(){return o.cancel("request was cancelled by sagas")},l},be=regeneratorRuntime.mark(xe),Se=function(e){return!!e&&e.constructor===Function&&e.call.constructor===Function};function xe(e,n,r){var a,o,c,u,i,s,d,f,l,p,g=arguments;return regeneratorRuntime.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:for(t(n.constructor===String,"valid method required"),t(!!r&&r.constructor===String,"valid path required"),a=[e[n],r],c=Array((o=g.length)>3?o-3:0),u=3;o>u;u++)c[u-3]=g[u];return"get"!==n&&a.push(c.shift()),i=c.shift(),s=c.shift(),d=c.shift(),t(!!i&&Se(i),"success must be a function"),t(!!s&&Se(s),"fail must be a function"),t(!d||Se(d),"done must be a function"),v.prev=11,v.next=14,B.apply(void 0,a);case 14:return l=v.sent.data,v.next=18,z(i(l));case 18:f={data:l},v.next=30;break;case 21:return v.prev=21,v.t0=v.catch(11),v.next=25,z(s(v.t0));case 25:if(!v.t0.response){v.next=29;break}return p=v.t0.response.status,v.next=29,z({type:"sagaApi/".concat(p),payload:v.t0.response});case 29:f={error:v.t0};case 30:if(!d){v.next=33;break}return v.next=33,z(d(f));case 33:case"end":return v.stop()}}),be,null,[[11,21]])}e.createApis=function(e){var t,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e,n=t.headers,a=void 0===n?{}:n;delete e.headers;var o=a.common||{};e=u({baseURL:window.location.hostname,timeout:5e3},e,{headers:u({},a,{common:u({"Content-Type":"application/json"},o)})});var c=r.create(e),i=function(e,t){c.defaults.headers.common[e]=t},s=function(e){delete c.defaults.headers.common[e]},d=function(e){i("Authorization",e)},f=function(){s("Authorization")};return{get:ye.bind(ye,c,"get"),put:ye.bind(ye,c,"put"),patch:ye.bind(ye,c,"patch"),post:ye.bind(ye,c,"post"),delete:ye.bind(ye,c,"delete"),addAuthorization:d,removeAuthorization:f,addHeader:i,removeHeader:s,instance:c}}(e);return{api:n,sagaApi:(t=n,{get:xe.bind(xe,t,"get"),post:xe.bind(xe,t,"post"),put:xe.bind(xe,t,"put"),patch:xe.bind(xe,t,"patch"),delete:xe.bind(xe,t,"delete")})}},e.createSuccess=ue,e.crudInitialState=he,e.crudReducers=me,e.crudSaga=ae,e.crudSlice=function(e){var r=e.name,a=e.initialState,o=e.reducers,c=e.sagas,u=e.sagaApi,i=e.takers;return t(!!r&&r.constructor===String,"must provide a valid name"),t(!!u&&u.constructor===Object,"must provide a valid sagaApi"),t(!o||o&&o.constructor===Object,"reducers must be an object"),t(!a||a&&a.constructor===Object,"initialState must be an object"),t(!c||c&&c.constructor===Function,"sagas must be a function"),t(!i||i&&[Object,String].includes(i.constructor),'takers must be an object or "takeEvery"'),n.createModule({name:r,initialState:he(a||{}),reducers:me(o||{}),sagas:ae({name:r,sagaApi:u,takers:i},c)})},e.deleteSuccess=se,e.failReducer=de,e.lifecycleReducers=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(o(t={},e,n.main||fe),o(t,"".concat(e,"Success"),n.success||le),o(t,"".concat(e,"Fail"),n.fail||de),t);return n.done&&(r["".concat(e,"Done")]=n.done instanceof Function?n.done:ve),r},e.loadingReducer=fe,e.noop=ve,e.notLoadingReducer=le,e.readAllSuccess=oe,e.readOneSuccess=ce,e.refetch=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return{saga:regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Q((function(e){return e[t].current}));case 2:if(r=n.sent.id){n.next=10;break}return console.warn("no current item set in ".concat(t," state")),void(n.next=8);case 8:n.next=12;break;case 10:return n.next=12,z(e.getOne({payload:r}));case 12:case"end":return n.stop()}}),n)})),taker:re.bind(re,n)}},e.resetCurrent=ge,e.setCurrent=pe,e.updateSuccess=ie,Object.defineProperty(e,"__esModule",{value:!0})}));
